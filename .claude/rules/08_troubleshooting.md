# よくあるトラブルと対応

---

## 話者エラーの防止

### 問題

第12回で「シャルルがシャルルを呼ぶ」エラーが発生。

### チェック方法

リプレイ作成時に以下をチェック：

- 「〇〇は〇〇に向かって」の形式で、同じ名前が登場していないか
- 発言者が自分自身を呼んでいないか

### 予防策

編集・校正フェーズで必ず確認項目に含める。

---

## キャラ評の信頼性

### 問題

08_LLMによるキャラ評/ には過去の誤りが含まれている可能性がある。

### 既知の誤り（修正済み）

| 誤り | 修正内容 | 修正回 |
|---|---|---|
| 巡礼者の体躯 | 巨大 → 人型サイズ | 第12回 |
| シャルルのクラス | クレリック → パラディン | 第12回 |

### 対応方法

1. リプレイ作成時には一次データを必ず参照
2. キャラ評は毎回更新するが、既存記述を無批判に引き継がない
3. 一次データと矛盾する場合は一次データを優先

---

## デプロイの不完全な反映

### 問題

`mkdocs gh-deploy` が正常終了しても、ファイルがgh-pagesブランチに反映されないことがある。

### 対策

1. デプロイ後に必ず実際のURLにアクセスして表示確認
2. 404の場合は `mkdocs gh-deploy --force` を再実行
3. 1-2分待ってから再確認

### 確認用URLパターン

```
https://makeinu1.github.io/DaD_Ghoul_Island/replays/sessionXX/
```

---

## 大きなSRTファイルの読み込み

### 問題

音声ログ（SRT）ファイルが大きい場合（300KB以上）、一度に読み込めない。

### 対策

チャンク読み込みを使用：

```
Read file with offset=0, limit=500
Read file with offset=500, limit=500
...
```

---

## プレイヤーログの不足

### 問題

特定の回でプレイヤーログが不足している。

### 各回のログ状況

| 回 | 巡礼者 | ノクシル | シャルル | 音声 |
|---|:---:|:---:|:---:|:---:|
| 第1回 | ✅ | ✅ | ✅ | ✅ |
| 第2回 | ✅ | ❌ | ❌ | ✅ |
| 第3回 | ✅ | ❌ | ✅ | ❌ |
| 第4回 | ✅ | ❌ | ❌ | ✅ |
| 第5回 | ✅ | ✅ | ✅ | ✅ |
| 第6回 | ✅ | ❌ | ✅ | ✅ |
| 第7回 | ✅ | ❌ | ❌ | ✅ |
| 第8回 | ✅ | ❌ | ✅ | ✅ |
| 第9回 | ✅ | ❌ | ❌ | ✅ |
| 第10回 | ✅ | ✅ | ❌ | ✅ |
| 第11回 | ✅ | ❌ | ❌ | ✅ |
| 第12回 | ❌ | ❌ | ✅ | ✅ |

### 対応方法

- 巡礼者ログが最も網羅的なので優先的に参照
- 不足分は音声ログから補完
- 内面描写はシャルル日誌・ノクシルログから抽出
